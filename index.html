<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Socket.IO Vanilla JS</title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        async function handleClick() {
            try {
                const response = await fetch('http://localhost:3000/incr', {
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    method: "POST",
                    credentials: 'include',
                })
                if (response.ok) {
                    return true;
                } else {
                    return false;
                }
            } catch (err) {
                console.log(err);
            }
        }
        const socket = io("http://localhost:3000", {
            withCredentials: true
        });

        socket.on("connect", () => {
            console.log("Connected to server with ID:", socket.id);
        });

        socket.on("disconnect", () => {
            console.log("Disconnected");
        });
    </script>
</head>

<body>

    <h1 onclick="handleClick()">Socket.IO Client</h1>

</body>

</html>